!function(){"use strict";let t=window.RHU;if(null==t)throw new Error("No RHU found. Did you import RHU before running?");t.module({module:"x-rhu/localisation",trace:new Error,hard:["Map","RHU.WeakCollection","RHU.eventTarget"]},(function(){t.exists(t.Localisation)&&console.warn("Overwriting RHU.Localisation...");let e={constructed:Symbol("localisation constructed")},o=t.Localisation={};t.eventTarget(o);let r,n=Object.prototype.isPrototypeOf.bind(HTMLElement.prototype),i=Function.call.bind(Element.prototype.setAttribute),l=Function.call.bind(Element.prototype.getAttribute),c=Function.call.bind(Element.prototype.hasAttribute),s=Function.call.bind(Element.prototype.removeAttribute);Element.prototype.setAttribute=function(t,e){return"rhu-loc"===t&&o.parse(this,r),i(this,t,e)},Element.prototype.removeAttribute=function(t){return"rhu-loc"===t&&o.parse(this,r),s(this,t)},t.definePublicAccessor(Element.prototype,"rhuLoc",{get:function(){let e=l(this,"rhu-loc");return t.exists(e)?e:void 0},set:function(t){i(this,"rhu-loc",t),o.parse(this,r)}}),o.setSchema=function(e){r=e;for(let t of a)o.parse(t,r,!0);o.dispatchEvent(t.CustomEvent("change",r))},t.definePublicAccessor(o,"schema",{get:function(){return r},set:o.setSchema});let a=new t.WeakCollection;o.parse=function(o,r,n=!1){if(!Object.hasOwnProperty.call(o,e.constructed)&&0!==t.properties(o,{hasOwn:!0}).size)throw new TypeError("Element is not eligible to be used as a rhu-loc.");if(c(o,"rhu-loc")){if(t.exists(r)){let i=l(o,"rhu-loc");(o[e.constructed]!==i||n)&&(t.parseOptions(o,r[i]),o[e.constructed]=i)}a.add(o)}else a.delete(o)};let u=function(t){n(t)&&c(t,"rhu-loc")&&o.parse(t,r);for(let e of t.childNodes)u(e)},d=new MutationObserver((function(t){let e=new Map;for(const n of t)switch(n.type){case"attributes":"rhu-loc"===n.attributeName&&(e.has(n.target)?e.get(n.target)!==n.oldValue&&(e.set(n.target,n.oldValue),o.parse(n.target,r)):e.set(n.target,n.oldValue));break;case"childList":for(let t of n.addedNodes)u(t)}for(let t of e.keys()){let n=l(t,"rhu-loc");e.get(t)!==n&&o.parse(t,r)}}));o.observe=function(t){d.observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:["rhu-loc"],childList:!0,subtree:!0})};let p=function(){window.dispatchEvent(new Event("load-rhu-localisation")),function(){let t=document.querySelectorAll("[rhu-loc]");for(let e of t)o.parse(e,r);o.observe(document)}()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",p):p()}))}();
