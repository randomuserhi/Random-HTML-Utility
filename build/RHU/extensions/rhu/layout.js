!function(){"use strict";let t=window.RHU;if(null==t)throw new Error("No RHU found. Did you import RHU before running?");t.module({module:"x-rhu/layout",trace:new Error,hard:["RHU.Macro","RHU.WeakCollection"]},(function(){t.exists(t.Layout)&&console.warn("Overwriting RHU.Layout...");let e=function(){for(let e of i){let i=e.layout;if(!t.exists(i.current))continue;let n=e.target,o=i.current[e.anchor];if(t.exists(o)){if(e.options.floating){let i=e._wrapper;t.exists(i)||(i=e._wrapper=document.createElement("div"),i.style.position="fixed",i.style.display="block",i.append(n));let r=o.getBoundingClientRect(),s=r.right-r.left,l=r.bottom-r.top;i.style.top=`${r.top}px`,i.style.left=`${r.left}px`,i.style.width=`${s}px`,i.style.height=`${l}px`,n=i}o.contains(n)||o.replaceChildren(n)}else e.options.floating?e._wrapper.style.display="none":n.remove()}requestAnimationFrame(e)},i=window.binds=new t.WeakCollection,n=function(e,n,o,r=undefined){this.layout=e,this.target=n,this.anchor=o,this.options={floating:!1},t.parseOptions(this.options,r),this._wrapper=null,i.add(this)};n.prototype.unbind=function(){t.exists(this._wrapper)&&(this._wrapper=null),this.target.remove(),i.remove(this)};let o=t.Layout=function(t){this.bindMap=new Map,this.current=null};o.prototype.setLayout=function(t){this.replaceChildren(),this.append(t),this.current=t},o.prototype.bind=function(t,e,i){this.bindMap.has(e)&&this.clear(e),this.bindMap.set(e,new n(this,t,e,i))},o.prototype.clear=function(t){this.bindMap.has(t)&&(this.bindMap.get(t).unbind(),this.bindMap.delete(t))},e()}))}();
